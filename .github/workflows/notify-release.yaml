name: Notify Integration Release
on:
  workflow_dispatch:
    inputs:
      version:
        description: 'A semver'
        default: 0.0.1
        required: false
jobs:
  send_notify_release_request:
    runs-on: ubuntu-latest
    permissions:
      issues: write
    steps:
      - name: Test
        run: |
          curl --request POST \
          --url https://07f5-2603-8001-6e03-e8c9-2406-d06c-a6cb-a25f.ngrok.io/notify-release \
          --header 'Authorization: Bearer ${{ secrets.GITHUB_TOKEN }}' \
          --header 'content-type: application/json' \
          --data '{
            "integration": "packer/integration-example",
            "version": "${{ github.event.inputs.version }}",
            "sha": "main"
            }'
